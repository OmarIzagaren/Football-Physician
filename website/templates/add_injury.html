{% extends 'base.html' %}

{% block content %}

<div class = "col-md-6 offset-md-3">
</br>
<h1>Add Injury</h1>
</br>
<form method="POST">
    {% csrf_token %}
    {% if errors_list %}
			<div class="alert alert-warning alert-dismissible fade show" role="alert">
			  Your Form Has Errors
			  {% for error in errors_list %}  
			  		{{ error }}
			  {% endfor %}
			  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		
	{% endif %}

{% if form.one_player %}
        <div class="col-auto my-1">
            {{ form.player }}
        </div>
            </br>
    
{% else %}

    <div style="display: none;">
        {{ form.player }}
    </div>

{% endif %}
    <div class="col-auto my-1">
        {{ form.injury }}
    </div>
        </br>
    <div class="form-floating">
        {{ form.injury_start_date }}
        <label for="floatingInput">Injury Start Date</label>
    </div>
        </br>
    <div class="form-floating" id="id_injury_end_date">
        {{ form.injury_end_date }}
        <label for="floatingInput">Injury End Date</label>
        </br>
    </div>
    <div>
        {{ form.injured }}
        <label for="id_injured" {% if form.injured.value %}checked="checked"{% endif %}>Injured</label>
    </div>
    </br>
    <button type="submit" class="btn btn-outline-primary">Register</button>

</form>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var injuredCheckbox = document.getElementById('id_injured');
    
        toggleInjuryEndDateVisibility();

        injuredCheckbox.addEventListener('change', function () {
            toggleInjuryEndDateVisibility();
        });

        function toggleInjuryEndDateVisibility() {
            var injuryEndDateField = document.getElementById('id_injury_end_date');

            if (injuredCheckbox.checked) {
                injuryEndDateField.style.display = 'none';
            } else {
                injuryEndDateField.style.display = 'block'; 
            }
        }
        
    });
  </script>

{% endblock %}